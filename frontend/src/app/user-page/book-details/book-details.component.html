<div class="bgded overlay imgcenter" style="background-image:url('../images/demo/backgrounds/b2.jpg');">
    <div id="breadcrumb" class="hoc clear"> 
      <!-- ################################################################################################ -->
      <h6 class="heading">{{ 'MAIN_NAV.BOOKS' | translate }}</h6>
      <!-- ################################################################################################ -->
      <ul>
        <li><a routerLink="" routerLinkActive="active">{{ 'MAIN_NAV.HOME' | translate }}</a></li>
        <li><a (click)="goBack()" style="cursor: pointer;">{{ 'MAIN_NAV.BOOKS' | translate }}</a></li>
        <li><a>{{book.title}}</a></li>
      </ul>
      <!-- ################################################################################################ -->
    </div>
</div>
<div id="book-details" class="wrapper row3">
    <main class="hoc container clear">

        <div class="content">
            <div class="btn-bar">
                <button class="button btn-1" (click)="goBack()">{{ 'BTN.BACK' | translate }}</button>
                <!-- <div class="right-side">
                  <button class="button btn-2 btn-delete" >Delete</button>
                </div> -->
            </div>

            <h1 class="font-x2">{{book.title}}</h1>
            <div class="desc">
                <img class="borderedbox inspace-5" src="../images/demo/cover1.jpg" alt="{{book.title}}">
                <div>
                    <p>Aliquatjusto quisque nam consequat doloreet vest orna partur scetur portortis nam. Metadipiscing eget facilis elit sagittis felisi eger id justo maurisus convallicitur.</p>
                    <p>Dapiensociis <a href="#">temper donec auctortortis cumsan</a> et curabitur condis lorem loborttis leo. Ipsumcommodo libero nunc at in velis tincidunt pellentum tincidunt vel lorem.</p>
                </div>
            </div>
            
            
            <div class="item-section">
                <h1>{{ 'BOOK_DETAILS.HEADER' | translate }}</h1>
                <table>
                    <tbody>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.TITLE' | translate }}:</td>
                            <td>{{book.title}}</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.AUTHORS' | translate }}:</td>
                            <td>Author 1, Author 2, Author 3</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.PUBLISHER' | translate }}:</td>
                            <td>{{book.publisher}}</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.PUBLICATION' | translate }}:</td>
                            <td>Wydanie 1.</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.PUBLICATION_YEAR' | translate }}:</td>
                            <td>2024</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.LANGUAGE' | translate }}:</td>
                            <td>{{book.language}}</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.PAGES' | translate }}:</td>
                            <td>{{book.pages}}</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.ISBN' | translate }}:</td>
                            <td>{{book.isbn}}</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.NOTES' | translate }}:</td>
                            <td>Książka dostępna również jako e-book</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.SUBJECT' | translate }}:</td>
                            <td>{{book.subject}}</td>
                        </tr>
                        <tr>
                            <td>{{ 'BOOK_DETAILS.GENRE' | translate }}:</td>
                            <td>Book</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="item-section" *ngIf="getLoanableItems().length > 0">
                <h1>{{ 'BOOK_DETAILS.LOANABLE_ITEMS' | translate }}</h1>
                <ul>
                    <li *ngFor="let bookItem of getLoanableItems()">
                        <div class="item-section-info">
                            <span><strong>{{ 'BOOK_DETAILS.CALL_NUMBER' | translate }}:</strong></span>
                            <span>{{bookItem.barcode}}</span>

                            <span><strong>{{ 'BOOK_DETAILS.STATUS.NAME' | translate }}:</strong></span>
                            <span>{{ getStatusLabel(bookItem.status) | translate }}</span>

                            <span><strong>{{ 'BOOK_DETAILS.LOCATION' | translate }}:</strong></span>
                            <span>{{bookItem.rack.locationIdentifier}}</span>
                        </div>
                        <div class="item-section-actions">
                            <div class="item-status" [ngClass]="{'available': isAvailable(bookItem), 'unavailable': !isAvailable(bookItem)}">
                                <i class="fa fa-2x fa-check" *ngIf="isAvailable(bookItem)"></i>
                                <i class="fa fa-2x fa-remove" *ngIf="!isAvailable(bookItem)"></i>
                                <span>
                                    {{isAvailable(bookItem) ? ('BOOK_DETAILS.STATUS.AVAILABLE' | translate) : ('BOOK_DETAILS.STATUS.UNAVAILABLE' | translate)}}
                                </span>
                            </div>
                            <div></div>
                            <div></div>
                            <ng-container *ngIf="isAuthenticated() | async">
                                <button *ngIf="!(hasUserBorrowed(bookItem) | async) && !(hasUserReserved(bookItem) | async)"
                                        (click)="makeAReservation(bookItem)">
                                    {{ isAvailable(bookItem) ? ('BOOK_DETAILS.BTN_REQUEST' | translate) : ('BOOK_DETAILS.BTN_RESERVE' | translate) }}
                                </button>
                                <div class="reserved-label" *ngIf="hasUserBorrowed(bookItem) | async">
                                    <i class="fa fa-home"></i>
                                    <span>{{ 'BOOK_DETAILS.STATUS.BORROWED' | translate }}</span>
                                </div>
                                <div class="reserved-label" *ngIf="hasUserReserved(bookItem) | async">
                                    <i class="fa fa-calendar-check-o"></i>
                                    <span>{{ 'BOOK_DETAILS.STATUS.RESERVED' | translate }}</span>
                                </div>
                            </ng-container>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="item-section" *ngIf="getOnSiteItems().length > 0">
                <h1>{{ 'BOOK_DETAILS.ON_SITE_ITEMS' | translate }}</h1>
                <ul>
                    <li *ngFor="let bookItem of getOnSiteItems()">
                        <div class="item-section-info">
                            <span><strong>{{ 'BOOK_DETAILS.CALL_NUMBER' | translate }}:</strong></span>
                            <span>{{bookItem.barcode}}</span>

                            <span><strong>{{ 'BOOK_DETAILS.STATUS.NAME' | translate }}:</strong></span>
                            <span>{{ getStatusLabel(bookItem.status) | translate }}</span>
                            
                            <span><strong>{{ 'BOOK_DETAILS.LOCATION' | translate }}:</strong></span>
                            <span>{{bookItem.rack.locationIdentifier}}</span>
                        </div>
                        <div class="item-section-actions">
                            <div class="item-status" [ngClass]="{'available': isAvailable(bookItem), 'unavailable': !isAvailable(bookItem)}">
                                <i class="fa fa-2x fa-check" *ngIf="isAvailable(bookItem)"></i>
                                <i class="fa fa-2x fa-remove" *ngIf="!isAvailable(bookItem)"></i>
                                <span>
                                    {{isAvailable(bookItem) ? ('BOOK_DETAILS.STATUS.AVAILABLE' | translate) : ('BOOK_DETAILS.STATUS.UNAVAILABLE' | translate)}}
                                </span>
                            </div>
                            <div></div>
                            <div></div>
                            <ng-container *ngIf="isAuthenticated() | async">
                                <button *ngIf="!(hasUserBorrowed(bookItem) | async) && !(hasUserReserved(bookItem) | async)"
                                        (click)="makeAReservation(bookItem)">
                                    {{ isAvailable(bookItem) ? ('BOOK_DETAILS.BTN_REQUEST' | translate) : ('BOOK_DETAILS.BTN_RESERVE' | translate) }}
                                </button>
                                <div class="reserved-label" *ngIf="hasUserBorrowed(bookItem) | async">
                                    <i class="fa fa-home"></i>
                                    <span>{{ 'BOOK_DETAILS.STATUS.BORROWED' | translate }}</span>
                                </div>
                                <div class="reserved-label" *ngIf="hasUserReserved(bookItem) | async">
                                    <i class="fa fa-calendar-check-o"></i>
                                    <span>{{ 'BOOK_DETAILS.STATUS.RESERVED' | translate }}</span>
                                </div>
                            </ng-container>
                            
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </main>
</div>


<!-- <div class="container">
    <div class="col-12">
        <div class="d-inline-block w-auto">
            <button class="btn btn-primary" (click)="goBack()">Back to results</button>
        </div>
    </div>
    
</div> -->